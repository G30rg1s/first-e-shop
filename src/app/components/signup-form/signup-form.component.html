<nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <div class="d-flex justify-content-between align-items-center w-100">
        <span class="navbar-text text-white">Δώστε τα στοιχεία σας για εγγραφή</span>
        <a role="button" href="login-form" class="btn btn-secondary">πίσω</a>
      </div>
    </div>
  </nav>

  @if (registrationStatus.message === "Not attempted yet") {

<div class="container">
    
    <form [formGroup]="form" class="d-flex flex-column">
        <div class="mb-3">
            <label for="firstname" class="form-label">Όνομα</label>
            <input type="text" class="form-control" id="firstname" formControlName="firstname">
            @if(form.get("firstname").invalid && form.get("firstname").touched){
                <div class="text-danger">Το όνομα είναι υποχρεωτικό</div>
            }
        </div>

        <div class="mb-3">
            <label for="lastname" class="form-label">Επίθετο</label>
            <input type="text" class="form-control" id="lastname" formControlName="lastname">
            @if(form.get("lastname").invalid && form.get("lastname").touched){
                <div class="text-danger">Το επίθετο είναι υποχρεωτικό</div>
            }
        </div>

        <div class="mb-3">
            <label for="phonenumber" class="form-label">Αριθμός κινητού</label>
            <input type="text" class="form-control" id="phonenumber" formControlName="phonenumber">
            @if(form.get("phonenumber").invalid && form.get("phonenumber").touched){
                <div class="text-danger">Το κινητό  είναι υποχρεωτικό</div>
            }
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="text" class="form-control" id="email" formControlName="email">
            <div *ngIf="form.get('email').hasError('duplicateEmail')">
                {{ form.get('email').getError('duplicateEmail') }}
              </div>
            @if(form.get("email").invalid && form.get("email").touched){
                <div class="text-danger">Το email είναι υποχρεωτικό</div>
            }
        </div>

        <div class="address-container">
            <div class="form-title">ΣΤΟΙΧΕΙΑ ΔΙΕΥΘΗΝΣΗΣ</div>
            <div formArrayName="address">
                <div *ngFor="let addressGroup of address.controls; let i=index" [formGroupName]="i" class="address-group">
                    <div class="row mb-2">
                        <div class="col-md-6">
                            <label for="city" class="form-label">Πόλη</label>
                            <input type="text" class="form-control" id="city" formControlName="city">
                            <div *ngIf="addressGroup.get('city').invalid && addressGroup.get('city').touched" class="text-danger">Η πόλη είναι υποχρεωτική</div>
                        </div>
                        <div class="col-md-6">
                            <label for="area" class="form-label">Περιοχή</label>
                            <input type="text" class="form-control" id="area" formControlName="area">
                            <div *ngIf="addressGroup.get('area').invalid && addressGroup.get('area').touched" class="text-danger">Η περιοχή είναι υποχρεωτική</div>
                        </div>
                    </div>
        
                    <div class="row mb-2">
                        <div class="col-md-6">
                            <label for="code" class="form-label">Ταχυδρομικός Κωδικός</label>
                            <input type="text" class="form-control" id="code" formControlName="code">
                            <div *ngIf="addressGroup.get('code').invalid && addressGroup.get('code').touched" class="text-danger">Ο ταχυδρομικός κωδικός είναι υποχρεωτικός</div>
                        </div>
                        <div class="col-md-6">
                            <label for="road" class="form-label">Οδός</label>
                            <input type="text" class="form-control" id="road" formControlName="road">
                            <div *ngIf="addressGroup.get('road').invalid && addressGroup.get('road').touched" class="text-danger">Η οδός είναι υποχρεωτική</div>
                        </div>
                    </div>
        
                    <div class="row mb-2">
                        <div class="col-md-6">
                            <label for="number" class="form-label">Αριθμός</label>
                            <input type="text" class="form-control" id="number" formControlName="number">
                            <div *ngIf="addressGroup.get('number').invalid && addressGroup.get('number').touched" class="text-danger">Ο αριθμός είναι υποχρεωτικός</div>
                        </div>
                        <div class="col-md-6">
                            <label for="floor" class="form-label">Όροφος</label>
                            <input type="text" class="form-control" id="floor" formControlName="floor">
                            <div *ngIf="addressGroup.get('floor').invalid && addressGroup.get('floor').touched" class="text-danger">Ο όροφος είναι υποχρεωτικός</div>
                        </div>
                    </div>
        
                    <div class="row mb-2">
                        <div class="col-md-6">
                            <label for="bell" class="form-label">Κουδούνι</label>
                            <input type="text" class="form-control" id="bell" formControlName="bell">
                            <div *ngIf="addressGroup.get('bell').invalid && addressGroup.get('bell').touched" class="text-danger">Το κουδούνι είναι υποχρεωτικό</div>
                        </div>
                        <div class="col-md-6">
                            <label for="specifications" class="form-label">Ειδικές Οδηγίες</label>
                            <input type="text" class="form-control" id="specifications" formControlName="specifications">
                            <div *ngIf="addressGroup.get('specifications').invalid && addressGroup.get('specifications').touched" class="text-danger">Οι ειδικές οδηγίες είναι υποχρεωτικές</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <input type="text" class="form-control" id="username" formControlName="username">
            <div *ngIf="form.get('username').hasError('duplicateUsername')">
                {{ form.get('username').getError('duplicateUsername') }}
              </div>
            @if(form.get("username").invalid && form.get("username").touched){
                <div class="text-danger">Το username είναι υποχρεωτικό</div>
            }
        </div>

        <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" formControlName="password">
           
            @if(form.get("password").invalid && form.get("password").touched   ){
                <div class="text-danger">Το password είναι υποχρεωτικό και πρέπει να έχει:
                    <ul>
                        <li>Τουλάχιστον 1 μικρό</li>
                        <li>Τουλάχιστον 1 κεφαλαίο</li>
                        <li>Τουλάχιστον 1 αριθμό</li>
                        <li>Τουλάχιστον 1 ειδικό χαρακτήρα</li>
                        <li>Τουλάχιστον 8 χαρακτήρες συνολικά</li>
                    </ul>
                </div> 
            }
        </div>

        <button (click)="handleSubmit()" class="btn btn-primary" [disabled]="form.invalid">ΕΛΕΓΧΟΣ ΣΤΟΙΧΕΙΩΝ</button>
        <button (click)="onSubmit()" class="btn btn-primary" [disabled]="!isCheckClicked || form.invalid">Submit</button>
       <!-- <button type="button" class="btn btn-primary" (click)="onCheck()">Check</button>
        <button type="submit" class="btn btn-success" [disabled]="!isCheckClicked">Submit</button>-->
    </form>
</div>
  }@else {
    @if (registrationStatus.success) {
      <div class="alert alert-success mt-2 w-50">
        <strong>Success:</strong>
        {{ registrationStatus.message }}
      </div>
    } @else {
      <div class="alert alert-danger mt-2 w-50">
        <strong>Error:</strong>
        {{ registrationStatus.message }}
      </div>
    }
}



